{
    "id" : "com.github.dalerank.akhenaten",
    "runtime" : "org.freedesktop.Platform",
    "runtime-version" : "25.08",
    "sdk" : "org.freedesktop.Sdk",
    "command" : "akhenaten",
    "finish-args" : [
        "--filesystem=home",
        "--share=ipc",
        "--device=dri",
        "--socket=wayland",
        "--socket=fallback-x11",
        "--socket=pulseaudio"
    ],
    "modules" : [
        {
            "name" : "akhenaten",
            "buildsystem" : "cmake-ninja",
            "config-opts" : [
                "-DCMAKE_BUILD_TYPE=Release",
                "-DOPTION_ENABLE_TRACY=OFF"
            ],
            "sources" : [
                {
                    "type" : "dir",
                    "path" : "."
                },
                {
                    "type" : "shell",
                    "commands" : [
                        "mkdir -p _deps",
                        "mkdir -p _deps/SDL2_mixer-src/external"
                    ]
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/nothings/stb/archive/f1c79c02822848a9bed4315b12c8c8f3761e1296.tar.gz",
                    "sha256" : "a39b0f2d96d9b64171ac1fd73295b7c5866f904e653b379da886d050a6900db9",
                    "dest" : "_deps/stb-src",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/madler/zlib/archive/refs/tags/v1.3.1.tar.gz",
                    "sha256" : "17e88863f3600672ab49182f217281b6fc4d3c762bde361935e436a95214d05c",
                    "dest" : "_deps/zlib-src",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/SDL/archive/refs/tags/release-2.32.10.tar.gz",
                    "sha256" : "03f9d7c191a837525c9cda6406af2f2e48be02b5e7eb03d949cc9f1e9ca41c8b",
                    "dest" : "_deps/SDL2-src",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/SDL_mixer/archive/refs/tags/release-2.8.1.tar.gz",
                    "sha256" : "63804b4b2ba503865c0853f102231aeff489b1dfc6dea4750a69e2a8ef54b2bb",
                    "dest" : "_deps/SDL2_mixer-src",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/pnggroup/libpng/archive/refs/tags/v1.6.53.tar.gz",
                    "sha256" : "b20cee717e11416d2f96ccc7d184f63730ca8cb2f03bfd0c4ed77fbc909c0bff",
                    "dest" : "_deps/libpng-src",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/ocornut/imgui/archive/refs/tags/v1.92.5.tar.gz",
                    "sha256" : "0eb50fe9aeba1a51f96b5843c7f630a32ed2e9362d693c61b87e4fa870cf826d",
                    "dest" : "_deps/imgui-src",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/freetype/freetype/archive/refs/tags/VER-2-14-1.tar.gz",
                    "sha256" : "44bd69d1f0750603410cfd4f26f1c5523c5a3a087a2dfa8639b757dc7c6677be",
                    "dest" : "_deps/freetype-src",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/harfbuzz/harfbuzz/archive/refs/tags/12.3.0.tar.gz",
                    "sha256" : "e93af4816128fc0a02d2e84106fdfe36a3fde01086b723be8f0656a65562ca9e",
                    "dest" : "_deps/harfbuzz-src",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/flac/archive/refs/heads/1.3.4-SDL.tar.gz",
                    "sha256" : "1588b88d9e7f372a3265a31697b94fd448750e1403ef46179c7b1b27f8b95d01",
                    "dest" : "_deps/sdl_mixer_deps/flac",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/ogg/archive/refs/heads/v1.3.5-SDL.tar.gz",
                    "sha256" : "029be168a1bc67fd6f167d3887fceca4fcdc3bcfd79e525d92ecdc3e7a09184a",
                    "dest" : "_deps/sdl_mixer_deps/ogg",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/vorbis/archive/refs/heads/v1.3.7-SDL.tar.gz",
                    "sha256" : "94fbfd0ef67c3ce6b662de01f3bc2308fb21760cdbd47dddfbf900d26abbb4ce",
                    "dest" : "_deps/sdl_mixer_deps/vorbis",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/opus/archive/refs/heads/v1.4-SDL.tar.gz",
                    "sha256" : "2046223c8545d331bdabb3c2ef4c80581898623cd8c8decbff45d93d1b5951d8",
                    "dest" : "_deps/sdl_mixer_deps/opus",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/opusfile/archive/refs/heads/v0.12-SDL.tar.gz",
                    "sha256" : "4a15459e4c5094cf7b5b3983def25f7ba5cffb6245b85eaaabbfb34df50f8b2f",
                    "dest" : "_deps/sdl_mixer_deps/opusfile",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/tremor/archive/refs/heads/v1.2.1-SDL.tar.gz",
                    "sha256" : "4303d2a7ac34f542f228bc513db473090c9937c0549c610a737b2569003bf03a",
                    "dest" : "_deps/sdl_mixer_deps/tremor",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/mpg123/archive/refs/heads/v1.31.3-SDL.tar.gz",
                    "sha256" : "05d1c752be1270e2fb4bbb618093a1d9940a90ae81ff01ebe74bcaac3fe165e5",
                    "dest" : "_deps/sdl_mixer_deps/mpg123",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/libxmp/archive/refs/heads/4.6.x-SDL.tar.gz",
                    "sha256" : "875bcf38625e6d9dff6ec16b828c29d80a2f960c5f459c9874f7eb906c8e2d21",
                    "dest" : "_deps/sdl_mixer_deps/libxmp",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/wavpack/archive/refs/heads/5.6.0-sdl.tar.gz",
                    "sha256" : "20f1546319abfebf548594bd67201d7341083bea8116149a278087bb5035aa39",
                    "dest" : "_deps/sdl_mixer_deps/wavpack",
                    "strip-components" : 1
                },
                {
                    "type" : "archive",
                    "url" : "https://github.com/libsdl-org/game-music-emu/archive/refs/heads/v0.6.3-SDL.tar.gz",
                    "sha256" : "ec1bbcba782b29f5f1edd6b7872024c9f73a580840c6317b657033092e49bf6c",
                    "dest" : "_deps/sdl_mixer_deps/libgme",
                    "strip-components" : 1
                },
                {
                    "type" : "shell",
                    "commands" : [
                        "cp -r _deps/sdl_mixer_deps/flac _deps/SDL2_mixer-src/external/",
                        "cp -r _deps/sdl_mixer_deps/ogg _deps/SDL2_mixer-src/external/",
                        "cp -r _deps/sdl_mixer_deps/vorbis _deps/SDL2_mixer-src/external/",
                        "cp -r _deps/sdl_mixer_deps/opus _deps/SDL2_mixer-src/external/",
                        "cp -r _deps/sdl_mixer_deps/opusfile _deps/SDL2_mixer-src/external/",
                        "cp -r _deps/sdl_mixer_deps/tremor _deps/SDL2_mixer-src/external/",
                        "cp -r _deps/sdl_mixer_deps/mpg123 _deps/SDL2_mixer-src/external/",
                        "cp -r _deps/sdl_mixer_deps/libxmp _deps/SDL2_mixer-src/external/",
                        "cp -r _deps/sdl_mixer_deps/wavpack _deps/SDL2_mixer-src/external/",
                        "cp -r _deps/sdl_mixer_deps/libgme _deps/SDL2_mixer-src/external/"
                    ]
                },
                {
                    "type" : "script",
                    "commands" : [
                        "cd /app/share/akhenaten",
                        "/app/bin/akhenaten.bin"
                    ],
                    "dest-filename" : "flatpak-akhenaten-wrapper.sh"
                }
            ],
            "post-install": [
                "install -Dm644 data/pharaoh_fonts_pack.sgx ${FLATPAK_DEST}/share/akhenaten/data/pharaoh_fonts_pack.sgx",
                "install -Dm644 data/pharaoh_custom_pack.sgx ${FLATPAK_DEST}/share/akhenaten/data/pharaoh_custom_pack.sgx",
                "install -Dm644 data/pharaoh_houses_pack.sgx ${FLATPAK_DEST}/share/akhenaten/data/pharaoh_houses_pack.sgx",
                "install -Dm644 data/neucha.ttf ${FLATPAK_DEST}/share/akhenaten/data/neucha.ttf",
                "chmod a+x flatpak-akhenaten-wrapper.sh",
                "mv /app/bin/akhenaten /app/bin/akhenaten.bin",
                "cp flatpak-akhenaten-wrapper.sh /app/bin/akhenaten"
            ]
        }
    ]
}
